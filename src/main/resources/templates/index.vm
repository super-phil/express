<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <title>快递列表</title>
    <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">
    <style>
        body {
            background: #f7f7f7;
        }

        th, td {
            white-space: nowrap;
        }

        .sys-head {
            padding-top: 80px;
        }
    </style>
</head>
<body style="min-width: 230px">
    #parse("navbar.vm")
<div class="container sys-head">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 ">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-12 col-sm-4 col-md-4">
                            <h3 class="panel-title">快递列表</h3>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="text-center">
                        <p class="bg-info">现金:100,月结1000,微信:600,欠款:800,代收:1000</p>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-xs-4">
                            <div class="form-group">
                                <label class="col-md-5 hidden-xs control-label" style="padding-top: 6px">按类型筛选</label>
                                <div class="col-md-7 col-xs-12" style="padding: 0px">
                                    <div class="input-group input-group-sm">
                                        <select class="form-control" id="q-select-type" onchange="qType()">
                                            <option value="x">现金</option>
                                            <option value="y">月结</option>
                                            <option value="w">微信</option>
                                            <option value="q">欠款</option>
                                            <option value="d">代收</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-xs-8">
                            <div class="form-group">
                                <label class="col-md-5 hidden-xs control-label" style="padding-top: 6px">按单号查询</label>
                                <div class="col-md-7 col-xs-12" style="padding: 0px">
                                    <div class="input-group input-group-sm">
                                        <input id="q-table-search" type="number" name="q" class="form-control"
                                               placeholder="按单号查询"
                                               autocomplete="off">
                                        <div class="input-group-btn">
                                            <button type="submit" class="btn btn-default" onclick="qSearch()">查询
                                            </button>
                                        </div>
                                    </div>
                                ##                                    <input type="number" class="form-control" id="form-number" name="number"
                                ##                                           placeholder="按单号查询">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered nowrap">
                            <thead>
                            <tr>
                            ##                                <th>ID</th>
                                <th>单号</th>
                                <th>类型</th>
                                <th>金额</th>
                                <th>日期</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                                #foreach($kv in $data)
                                <tr>
                                ##                                    <td>$kv.get("id")</td>
                                    <td>$kv.get("number")</td>
                                    <td>$kv.get("type")</td>
                                    <td>$kv.get("price")</td>
                                    <td>$kv.get('create_time')</td>
                                    <td></td>
                                </tr>
                                #end
                            </tbody>
                        </table>
                        <nav>
                            <ul class="pager">
                                #if($previous_f)
                                <li>
                                    #if($q)
                                        <a href="/express/index?start=$previous_f&q=$q">上一页</a>
                                    #elseif($type)
                                        <a href="/express/index?start=$previous_f&type=$type">上一页</a>
                                    #else
                                            <a href="/express/index?start=$previous_f>上一页</a>
                                        #end
                                    </li>
                                #end
                                #if($next_f)
                                    <li>
                                        #if($q)
                                            <a href="/express/index?start=$next_f&q=$q">下一页</a>
                            #elseif($type)
                                <a href="/express/index?start=$next_f&type=$type">下一页</a>
                            #else
                                <a href="/express/index?start=$next_f">下一页</a>
                            #end
                            </li>
                            #end
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="add-modal">
    <div class="modal-dialog">
        <div class="modal-content span12">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">添加</h4>
            </div>
            <form id="add-form" class="form-horizontal" method="post" autocomplete="off">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">单号</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" id="form-number" name="number"
                                   placeholder="365842574414">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">类型</label>
                        <div class="col-sm-10">
                            <select class="form-control" name="type">
                                <option value="x">现金</option>
                                <option value="y">月结</option>
                                <option value="w">微信</option>
                                <option value="q">欠款</option>
                                <option value="d">代收</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">价格</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" name="price">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="reset" class="btn btn-danger">清空</button>
                    <button type="button" class="add-form-submit btn btn-primary">提交</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.slim.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="//cdn.bootcss.com/sweetalert/1.1.3/sweetalert.min.js"></script>
<script>
    window.qType = function qType() {
        var objS = document.getElementById("q-select-type");
        var v = objS.options[objS.selectedIndex].value;
        window.location.href = "/express/index?start=0&type=" + v;
    }
    window.qSearch = function qSearch() {
        window.location.href = "/express/index?start=0&q=" + $('#q-table-search').val();
    }
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null)return unescape(r[2]);
        return null;
    }
    if (getQueryString("type") != null) {
        $("#q-select-type").val(getQueryString("type"));
    } else if (getQueryString("q") != null) {
        $('#q-table-search').val(getQueryString("q"));
    }
    $(function () {

//            if ($("#form-number").val().length != 12) {
//                return swal("单号长度有误!");
//            }
//            $('#add-form').ajaxSubmit({
//                url: "/express/save",
//                success: function (result) {
//                    console.info(result)
//                    swal(result.msg, "", "success");
//                }
//            })
    });
</script>
</body>
</html>
